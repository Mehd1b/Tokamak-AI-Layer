"use strict";(globalThis.webpackChunktal_docs=globalThis.webpackChunktal_docs||[]).push([[3147],{8832(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sdk/reputation-and-validation","title":"Reputation & Validation","description":"The ReputationClient and ValidationClient handle the two core trust mechanisms in TAL: feedback-based reputation and validator-based execution verification.","source":"@site/docs/sdk/reputation-and-validation.md","sourceDirName":"sdk","slug":"/sdk/reputation-and-validation","permalink":"/sdk/reputation-and-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/tokamak-network/Tokamak-AI-Layer/tree/master/docs/docs/sdk/reputation-and-validation.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Reputation & Validation","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Identity Client","permalink":"/sdk/identity-client"},"next":{"title":"Types Reference","permalink":"/sdk/types-reference"}}');var d=n(4848),s=n(8453);const a={title:"Reputation & Validation",sidebar_position:3},r="Reputation & Validation",l={},c=[{value:"ReputationClient",id:"reputationclient",level:2},{value:"Methods",id:"methods",level:3},{value:"Write Methods",id:"write-methods",level:4},{value:"Read Methods",id:"read-methods",level:4},{value:"Submit Feedback",id:"submit-feedback",level:3},{value:"Submit Feedback with Payment Proof",id:"submit-feedback-with-payment-proof",level:3},{value:"Query Reputation",id:"query-reputation",level:3},{value:"Get Feedback Entries",id:"get-feedback-entries",level:3},{value:"Revoke and Respond to Feedback",id:"revoke-and-respond-to-feedback",level:3},{value:"ValidationClient",id:"validationclient",level:2},{value:"Methods",id:"methods-1",level:3},{value:"Write Methods",id:"write-methods-1",level:4},{value:"Read Methods",id:"read-methods-1",level:4},{value:"Request Validation",id:"request-validation",level:3},{value:"Validation Models",id:"validation-models",level:3},{value:"Submit Validation",id:"submit-validation",level:3},{value:"Query Validation Status",id:"query-validation-status",level:3},{value:"Dispute a Validation",id:"dispute-a-validation",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.header,{children:(0,d.jsx)(t.h1,{id:"reputation--validation",children:"Reputation & Validation"})}),"\n",(0,d.jsxs)(t.p,{children:["The ",(0,d.jsx)(t.code,{children:"ReputationClient"})," and ",(0,d.jsx)(t.code,{children:"ValidationClient"})," handle the two core trust mechanisms in TAL: ",(0,d.jsx)(t.strong,{children:"feedback-based reputation"})," and ",(0,d.jsx)(t.strong,{children:"validator-based execution verification"}),"."]}),"\n",(0,d.jsxs)(t.p,{children:["Access them via ",(0,d.jsx)(t.code,{children:"tal.reputation"})," and ",(0,d.jsx)(t.code,{children:"tal.validation"}),", or use the convenience methods directly on ",(0,d.jsx)(t.code,{children:"TALClient"}),"."]}),"\n",(0,d.jsx)(t.hr,{}),"\n",(0,d.jsx)(t.h2,{id:"reputationclient",children:"ReputationClient"}),"\n",(0,d.jsxs)(t.p,{children:["The reputation system allows clients to submit on-chain feedback for agents. Feedback is aggregated using stake-weighted algorithms defined in the ",(0,d.jsx)(t.code,{children:"ReputationMath"})," library."]}),"\n",(0,d.jsx)(t.mermaid,{value:"flowchart LR\n    A[Client] --\x3e|submitFeedback| B[TALReputationRegistry]\n    B --\x3e C[Store On-chain]\n    C --\x3e D[Aggregate with ReputationMath]\n    D --\x3e|getSummary| E[Feedback Summary]\n    D --\x3e|getStakeWeightedSummary| F[Stake-Weighted Summary]\n    D --\x3e|getVerifiedSummary| G[Verified Summary]"}),"\n",(0,d.jsx)(t.h3,{id:"methods",children:"Methods"}),"\n",(0,d.jsx)(t.h4,{id:"write-methods",children:"Write Methods"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Method"}),(0,d.jsx)(t.th,{children:"Parameters"}),(0,d.jsx)(t.th,{children:"Returns"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"submitFeedback"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, feedback: FeedbackInput"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TransactionResult"})}),(0,d.jsx)(t.td,{children:"Submit feedback for an agent"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"revokeFeedback"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, feedbackIndex: number"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TransactionResult"})}),(0,d.jsx)(t.td,{children:"Revoke previously submitted feedback"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"respondToFeedback"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, client: Address, feedbackIndex: number, responseURI: string"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TransactionResult"})}),(0,d.jsx)(t.td,{children:"Respond to feedback (agent owner/operator only)"})]})]})]}),"\n",(0,d.jsx)(t.h4,{id:"read-methods",children:"Read Methods"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Method"}),(0,d.jsx)(t.th,{children:"Parameters"}),(0,d.jsx)(t.th,{children:"Returns"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getReputation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, options?: ReputationQueryOptions"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"FeedbackSummary"})}),(0,d.jsx)(t.td,{children:"Get aggregated reputation summary"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getStakeWeightedReputation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, clients?: Address[]"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"FeedbackSummary"})}),(0,d.jsx)(t.td,{children:"Get stake-weighted reputation"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getVerifiedReputation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, clients?: Address[]"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"FeedbackSummary"})}),(0,d.jsx)(t.td,{children:"Get reputation from validated tasks only"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getFeedback"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint, client: Address"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"FeedbackEntry[]"})}),(0,d.jsx)(t.td,{children:"Get feedback entries from a specific client"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getClientList"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Address[]"})}),(0,d.jsx)(t.td,{children:"Get all addresses that submitted feedback"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getFeedbackCount"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"number"})}),(0,d.jsx)(t.td,{children:"Get total feedback count"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getReviewerReputation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"reviewer: Address"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"bigint"})}),(0,d.jsx)(t.td,{children:"Get a reviewer's own reputation score"})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"submit-feedback",children:"Submit Feedback"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"import { TALClient } from '@tokamak/tal-sdk';\n\nconst tal = new TALClient({\n  rpcUrl: 'https://rpc.thanos-sepolia.tokamak.network',\n  walletClient,\n});\n\n// Submit feedback with a score of 85 (2 decimal places = 0.85 normalized)\nconst tx = await tal.submitFeedback(1n, {\n  value: 8500,\n  valueDecimals: 2,\n  tag1: 'accuracy',\n  tag2: 'speed',\n  endpoint: 'https://agent.example.com/summarize',\n  feedbackURI: 'ipfs://QmFeedbackDetails...',\n});\n\nconsole.log(`Feedback submitted: ${tx.hash}`);\n"})}),"\n",(0,d.jsx)(t.admonition,{title:"Self-Feedback Prevention",type:"info",children:(0,d.jsxs)(t.p,{children:["The contract prevents agent owners from submitting feedback for their own agents. When ",(0,d.jsx)(t.code,{children:"taskFeeEscrow"})," is configured, only users who have completed at least one task for the agent can submit feedback."]})}),"\n",(0,d.jsx)(t.h3,{id:"submit-feedback-with-payment-proof",children:"Submit Feedback with Payment Proof"}),"\n",(0,d.jsx)(t.p,{children:"Feedback accompanied by an x402 payment proof carries higher weight in reputation calculations:"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"const x402Proof = new Uint8Array([/* payment proof bytes */]);\n\nconst tx = await tal.submitFeedbackWithPaymentProof(\n  1n,\n  {\n    value: 9200,\n    valueDecimals: 2,\n    tag1: 'reliability',\n    tag2: 'cost-efficiency',\n  },\n  x402Proof,\n);\n"})}),"\n",(0,d.jsx)(t.h3,{id:"query-reputation",children:"Query Reputation"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"// Basic reputation summary\nconst summary = await tal.getReputation(1n);\nconsole.log(`Average: ${summary.average}`);\nconsole.log(`Total feedbacks: ${summary.count}`);\nconsole.log(`Min: ${summary.min}, Max: ${summary.max}`);\n\n// Stake-weighted reputation (higher-staked reviewers have more influence)\nconst weighted = await tal.getStakeWeightedReputation(1n);\n\n// Verified reputation (only from validated task interactions)\nconst verified = await tal.getVerifiedReputation(1n);\n\n// Filter by specific clients\nconst filtered = await tal.getReputation(1n, {\n  clients: ['0xClient1...', '0xClient2...'],\n  stakeWeighted: true,\n});\n"})}),"\n",(0,d.jsx)(t.h3,{id:"get-feedback-entries",children:"Get Feedback Entries"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"// Get all feedback for an agent\nconst { feedbacks, total } = await tal.getFeedback(1n);\n\nfor (const fb of feedbacks) {\n  console.log(`Score: ${fb.value} (${fb.valueDecimals} decimals)`);\n  console.log(`Tags: ${fb.tag1}, ${fb.tag2}`);\n  console.log(`Revoked: ${fb.isRevoked}`);\n  console.log(`Has payment proof: ${fb.hasPaymentProof}`);\n  console.log(`Timestamp: ${fb.timestamp}`);\n}\n\n// Get feedback from a specific client\nconst clientFeedback = await tal.reputation.getFeedback(\n  1n,\n  '0xClientAddress...',\n);\n"})}),"\n",(0,d.jsx)(t.h3,{id:"revoke-and-respond-to-feedback",children:"Revoke and Respond to Feedback"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"// Revoke feedback (original submitter only)\nawait tal.revokeFeedback(1n, 0); // agentId, feedbackIndex\n\n// Respond to feedback (agent owner/operator only)\nawait tal.respondToFeedback(\n  1n,\n  '0xClientAddress...',\n  0,\n  'ipfs://QmResponseDetails...',\n);\n"})}),"\n",(0,d.jsx)(t.hr,{}),"\n",(0,d.jsx)(t.h2,{id:"validationclient",children:"ValidationClient"}),"\n",(0,d.jsx)(t.p,{children:"The validation system provides execution verification through multi-model validation. A requester submits a task hash and output hash, and a DRB-selected validator re-executes the task to verify correctness."}),"\n",(0,d.jsx)(t.mermaid,{value:"sequenceDiagram\n    participant R as Requester\n    participant V as TALValidationRegistry\n    participant DRB as DRBIntegrationModule\n    participant Val as Validator\n\n    R->>V: requestValidation(agentId, taskHash, outputHash, model, bounty)\n    V->>DRB: selectValidator(candidates, stakes)\n    DRB--\x3e>V: selectedValidator\n    V--\x3e>R: requestHash\n\n    Note over Val: Re-execute task & compare output\n    Val->>V: submitValidation(requestHash, score, proof, detailsURI)\n\n    Note over V: Distribute bounty: 81% validator, 9% agent, 10% treasury"}),"\n",(0,d.jsx)(t.h3,{id:"methods-1",children:"Methods"}),"\n",(0,d.jsx)(t.h4,{id:"write-methods-1",children:"Write Methods"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Method"}),(0,d.jsx)(t.th,{children:"Parameters"}),(0,d.jsx)(t.th,{children:"Returns"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requestValidation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"params: ValidationRequestParams"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"{ requestHash: Bytes32, tx: TransactionResult }"})}),(0,d.jsx)(t.td,{children:"Request validation with bounty payment"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"submitValidation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requestHash: Bytes32, score: number, proof: 0x${string}, detailsURI: string"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TransactionResult"})}),(0,d.jsx)(t.td,{children:"Submit validation result (selected validator only)"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"disputeValidation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requestHash: Bytes32, evidence: 0x${string}"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TransactionResult"})}),(0,d.jsx)(t.td,{children:"Dispute a validation result"})]})]})]}),"\n",(0,d.jsx)(t.h4,{id:"read-methods-1",children:"Read Methods"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Method"}),(0,d.jsx)(t.th,{children:"Parameters"}),(0,d.jsx)(t.th,{children:"Returns"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getValidation"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requestHash: Bytes32"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"ValidationDetails"})}),(0,d.jsx)(t.td,{children:"Get full validation details"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getAgentValidations"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Bytes32[]"})}),(0,d.jsx)(t.td,{children:"Get all validation request hashes for an agent"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getValidationsByRequester"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requester: Address"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Bytes32[]"})}),(0,d.jsx)(t.td,{children:"Get validations requested by an address"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getValidationsByValidator"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"validator: Address"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Bytes32[]"})}),(0,d.jsx)(t.td,{children:"Get validations performed by an address"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getPendingValidationCount"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"agentId: bigint"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"number"})}),(0,d.jsx)(t.td,{children:"Get count of pending validations"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"getSelectedValidator"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"requestHash: Bytes32"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Address"})}),(0,d.jsx)(t.td,{children:"Get the DRB-selected validator for a request"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"isTrustedTEEProvider"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"provider: Address"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"boolean"})}),(0,d.jsx)(t.td,{children:"Check if a TEE provider is trusted"})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"request-validation",children:"Request Validation"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"import { ValidationModel } from '@tokamak/tal-sdk';\nimport { parseEther } from 'viem';\n\nconst { requestHash, tx } = await tal.requestValidation({\n  agentId: 1n,\n  taskHash: '0xabcd...' as `0x${string}`,    // Hash of the task input\n  outputHash: '0x1234...' as `0x${string}`,   // Hash of the agent output\n  model: ValidationModel.StakeSecured,\n  deadline: new Date(Date.now() + 24 * 60 * 60 * 1000), // 24 hours\n  bounty: parseEther('0.1'),                   // 0.1 ETH bounty\n});\n\nconsole.log(`Validation requested: ${requestHash}`);\n"})}),"\n",(0,d.jsx)(t.h3,{id:"validation-models",children:"Validation Models"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Model"}),(0,d.jsx)(t.th,{children:"Value"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"ReputationOnly"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"0"})}),(0,d.jsx)(t.td,{children:"Lightweight aggregated feedback scores"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"StakeSecured"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"1"})}),(0,d.jsx)(t.td,{children:"DRB-selected validator with stake collateral"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"TEEAttested"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"2"})}),(0,d.jsx)(t.td,{children:"Hardware-backed execution verification (SGX, Nitro, TrustZone)"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"Hybrid"})}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"3"})}),(0,d.jsx)(t.td,{children:"Combines stake-secured and TEE attestation"})]})]})]}),"\n",(0,d.jsx)(t.h3,{id:"submit-validation",children:"Submit Validation"}),"\n",(0,d.jsx)(t.p,{children:"Selected validators submit their results after re-executing the agent's task:"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"const tx = await tal.submitValidation(\n  requestHash,\n  92,                                        // Score (0-100)\n  '0xProofBytes...' as `0x${string}`,        // Execution proof\n  'ipfs://QmValidationDetails...',           // Detailed results URI\n);\n"})}),"\n",(0,d.jsx)(t.h3,{id:"query-validation-status",children:"Query Validation Status"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"// Get validation details\nconst details = await tal.getValidationStatus(requestHash);\n\nconsole.log(`Agent: ${details.request.agentId}`);\nconsole.log(`Model: ${details.request.model}`);            // 1 = StakeSecured\nconsole.log(`Status: ${details.request.status}`);           // 0=Pending, 1=Completed, 2=Expired, 3=Disputed\nconsole.log(`Bounty: ${details.request.bounty}`);\nconsole.log(`Disputed: ${details.isDisputed}`);\n\nif (details.response) {\n  console.log(`Validator: ${details.response.validator}`);\n  console.log(`Score: ${details.response.score}`);\n  console.log(`Details: ${details.response.detailsURI}`);\n}\n\n// Get all validations for an agent, filtered by status\nconst completed = await tal.getAgentValidations(1n, {\n  status: 1, // ValidationStatus.Completed\n  limit: 10,\n});\n"})}),"\n",(0,d.jsx)(t.h3,{id:"dispute-a-validation",children:"Dispute a Validation"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-typescript",children:"const tx = await tal.disputeValidation(\n  requestHash,\n  '0xEvidenceBytes...' as `0x${string}`,\n);\n"})}),"\n",(0,d.jsx)(t.admonition,{title:"Bounty Distribution",type:"info",children:(0,d.jsxs)(t.p,{children:["When a validation completes successfully, the bounty is distributed automatically: ",(0,d.jsx)(t.strong,{children:"10%"})," to the protocol treasury, ",(0,d.jsx)(t.strong,{children:"9%"})," to the agent owner, and the remaining ",(0,d.jsx)(t.strong,{children:"81%"})," to the validator."]})}),"\n",(0,d.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,d.jsxs)(t.ul,{children:["\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.a,{href:"./types-reference",children:"Types Reference"})," -- Full type definitions for ",(0,d.jsx)(t.code,{children:"FeedbackInput"}),", ",(0,d.jsx)(t.code,{children:"ValidationRequestParams"}),", etc."]}),"\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.a,{href:"../integration/drb-integration",children:"DRB Integration"})," -- How validator selection works under the hood"]}),"\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.a,{href:"../integration/staking-bridge",children:"Staking Bridge"})," -- Economic security via TON staking"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,d.jsx)(t,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453(e,t,n){n.d(t,{R:()=>a,x:()=>r});var i=n(6540);const d={},s=i.createContext(d);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);